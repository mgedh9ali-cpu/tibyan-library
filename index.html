<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…ÙƒØªØ¨Ø© ØªØ¨ÙŠØ§Ù† Ø§Ù„Ø´Ø§Ù…Ù„Ø© | Ù†Ø³Ø®Ø© Ø­ÙŠØ²ÙˆÙ…</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

    <style>
        :root {
            --p: #2C1B18; --g: #D4AF37; --bg: #FDFCF9; --card: #ffffff; --text: #2C1B18; --gray: #999;
        }
        .dark-mode {
            --bg: #121212; --card: #1e1e1e; --text: #e0e0e0; --p: #D4AF37; --gray: #bbb;
        }

        body {
            background-color: var(--bg); color: var(--text);
            font-family: 'Segoe UI', Tahoma, sans-serif; margin: 0; padding-bottom: 120px;
            transition: 0.3s; direction: rtl;
        }

        /* Ø§Ù„Ù‡ÙŠØ¯Ø± */
        .main-header {
            background: var(--p); color: white; padding: 25px; text-align: center;
            border-radius: 0 0 35px 35px; cursor: pointer; box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        /* Ø§Ù„Ø¨Ø­Ø« */
        .search-box { padding: 15px; }
        .search-bar {
            width: 100%; padding: 12px; border-radius: 15px; border: 1px solid var(--p);
            background: var(--card); color: var(--text); outline: none;
        }

        /* Ø§Ù„Ø£Ù‚Ø³Ø§Ù… */
        .page-section { display: none; padding: 15px; animation: fadeIn 0.4s; }
        .active-section { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Ø§Ù„ÙƒØ±ÙˆØª */
        .book-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .book-card {
            background: var(--card); border-radius: 20px; padding: 12px; text-align: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05); cursor: pointer; transition: 0.3s;
        }
        .book-card:active { transform: scale(0.95); }
        .book-card img { width: 100%; border-radius: 15px; height: 140px; object-fit: cover; }

        /* ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø£ØµÙˆØ§Øª */
        .voice-item {
            background: var(--card); padding: 15px; margin-bottom: 10px; border-radius: 15px;
            display: flex; justify-content: space-between; align-items: center; border: 2px solid transparent;
        }
        .voice-item.selected { border-color: var(--g); background: #fffcf0; }

        /* Ø§Ù„Ù…Ø´ØºÙ„ */
        .player-bar {
            position: fixed; bottom: 85px; width: 94%; left: 3%; background: var(--p);
            color: white; padding: 12px; border-radius: 20px; display: none; align-items: center; gap: 10px;
            z-index: 1000;
        }

        /* Ø§Ù„Ù†Ø§Ù Ø¨Ø§Ø± */
        .nav-bar {
            position: fixed; bottom: 0; width: 100%; background: var(--card);
            display: flex; justify-content: space-around; padding: 12px 0;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.05); z-index: 1100;
        }
        .nav-item { background: none; border: none; color: var(--gray); font-size: 11px; flex: 1; text-align: center; }
        .nav-item.active { color: var(--p); font-weight: bold; }
        .nav-item i { display: block; font-size: 22px; margin-bottom: 4px; }
        #admin-btn { display: none; color: var(--g); }

        /* Ù…Ù‚ØªØ·ÙØ§Øª */
        #quoteCard { background: white; padding: 25px; border-radius: 20px; border-right: 6px solid var(--g); margin-top: 20px; color: #2C1B18; }
        
        /* Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª */
        .setting-row { display: flex; justify-content: space-between; padding: 15px; background: var(--card); border-radius: 15px; margin-bottom: 10px; }
        .switch { position: relative; width: 40px; height: 20px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background: #ccc; border-radius: 20px; transition: 0.4s; }
        .slider:before { position: absolute; content: ""; height: 14px; width: 14px; left: 3px; bottom: 3px; background: white; border-radius: 50%; transition: 0.4s; }
        input:checked + .slider { background: var(--g); }
        input:checked + .slider:before { transform: translateX(20px); }
    </style>
</head>
<body onload="checkAdmin()">

<header class="main-header" onclick="hizoomSecret()">
    <h3>Ù…ÙƒØªØ¨Ø© ØªØ¨ÙŠØ§Ù† âœ¨</h3>
    <p id="trust-msg" style="font-size: 10px; opacity: 0.8;">Ø§Ù„Ø£ØµÙˆØ§Øª Ù…ÙØ®ØªØ§Ø±Ø© Ø¨Ø¹Ù†Ø§ÙŠØ© Ù„ØªÙ†Ø§Ø³Ø¨ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø·ÙˆÙŠÙ„Ø© ÙˆØ±Ø§Ø­Ø© Ø§Ù„Ø£Ø°Ù† ğŸ¤</p>
</header>

<main>
    <section id="home" class="page-section active-section">
        <div class="search-box"><input type="text" id="searchInput" class="search-bar" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† ÙƒØªØ§Ø¨..." onkeyup="search()"></div>
        <div id="grid" class="book-grid">
            <div class="book-card" onclick="openVoices('Ø²Ø§Ø¯ Ø§Ù„Ù…Ø¹Ø§Ø¯')">
                <img src="https://via.placeholder.com/150/2C1B18/white?text=Ø²Ø§Ø¯+Ø§Ù„Ù…Ø¹Ø§Ø¯">
                <h4>Ù…Ø®ØªØµØ± Ø²Ø§Ø¯ Ø§Ù„Ù…Ø¹Ø§Ø¯</h4>
            </div>
        </div>
    </section>

    <section id="voices-page" class="page-section">
        <button onclick="nav('home', document.querySelector('.fa-home'))" style="background:none; border:none; color:var(--p); margin-bottom:15px;"><i class="fas fa-arrow-right"></i> Ø¹ÙˆØ¯Ø© Ù„Ù„ÙƒØªØ¨</button>
        <h4 id="target-book">Ø§Ø®ØªØ± Ø§Ù„ØµÙˆØª Ø§Ù„Ù…Ù†Ø§Ø³Ø¨:</h4>
        <div id="voices-list">
            <div class="voice-item" onclick="selectVoice('ar-XA-Wavenet-B', this)">
                <div><b>ØµÙˆØª Ø§Ù„Ù…ÙƒØªØ¨Ø© ğŸ“š</b><br><small>Ø±Ø¬Ù„ Ù‡Ø§Ø¯Ø¦ØŒ Ø¯Ø§ÙØ¦ (Ù„Ù„Ø´Ø±Ø¹ÙŠ ÙˆØ§Ù„ÙÙƒØ±)</small></div>
                <i class="fas fa-play-circle" style="color:var(--g)"></i>
            </div>
            <div class="voice-item" onclick="selectVoice('ar-XA-Wavenet-D', this)">
                <div><b>ØµÙˆØª Ø§Ù„Ù…Ø¹Ø±ÙØ© ğŸ§ </b><br><small>ÙˆØ§Ø¶Ø­ ÙˆÙ…Ø­Ø§ÙŠØ¯ (Ù„Ù„Ø¹Ù„Ù…ÙŠ ÙˆØ§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ)</small></div>
                <i class="fas fa-play-circle" style="color:var(--g)"></i>
            </div>
            <div class="voice-item" onclick="selectVoice('ar-SA-HamedNeural', this)">
                <div><b>ØµÙˆØª Ø§Ù„Ø£Ø¯Ø¨ âœï¸</b><br><small>Ù†Ø¨Ø±Ø© Ø¥Ù†Ø³Ø§Ù†ÙŠØ© (Ù„Ù„Ù†ØµÙˆØµ ÙˆØ§Ù„Ø±ÙˆØ§ÙŠØ§Øª)</small></div>
                <i class="fas fa-play-circle" style="color:var(--g)"></i>
            </div>
            <div class="voice-item" onclick="selectVoice('ar-SA-ZariyahNeural', this)">
                <div><b>ØµÙˆØª Ù‡Ø§Ø¯Ø¦ ğŸ¤</b><br><small>Ù†Ø¨Ø±Ø© Ù…Ø±ÙŠØ­Ø© (Ù„Ù„Ù…Ù‚ØªØ·ÙØ§Øª ÙˆØ§Ù„Ø®ÙˆØ§Ø·Ø±)</small></div>
                <i class="fas fa-play-circle" style="color:var(--g)"></i>
            </div>
            <div class="voice-item" onclick="selectVoice('night', this)">
                <div><b>ØµÙˆØª Ø§Ù„Ù„ÙŠÙ„ ğŸŒ™</b><br><small>Ù…Ù†Ø®ÙØ¶ ÙˆØ¨Ø·ÙŠØ¡ (Ù„Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ø§Ù„Ù‡Ø§Ø¯Ø¦)</small></div>
                <i class="fas fa-play-circle" style="color:var(--g)"></i>
            </div>
        </div>
    </section>

    <section id="quotes" class="page-section">
        <button onclick="generateAI()" style="width:100%; padding:15px; background:var(--g); border:none; border-radius:15px; font-weight:bold;">ØªÙˆÙ„ÙŠØ¯ Ø­ÙƒÙ…Ø© Ø§Ù„ÙŠÙˆÙ… âœ¨</button>
        <div id="quoteContainer">
            <div id="quoteCard" style="display:none;">
                <p id="quoteText" style="font-size:18px; line-height:1.6;"></p>
                <small>â€” ÙƒØ­ÙŠÙ„Ø§Ù† Ø§Ù„Ø°ÙƒÙŠ</small>
            </div>
        </div>
    </section>

    <section id="profile" class="page-section">
        <div class="setting-row"><span>Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ</span><label class="switch"><input type="checkbox" onchange="toggleDark()"><span class="slider"></span></label></div>
        <div class="setting-row"><span>Ø³Ø±Ø¹Ø© Ø§Ù„ØµÙˆØª 1.5x</span><label class="switch"><input type="checkbox" id="speedT" onchange="toggleSpeed()"><span class="slider"></span></label></div>
    </section>

    <section id="admin-panel" class="page-section">
        <div style="background:white; padding:20px; border-radius:20px;">
            <h3>Ù†Ø´Ø± ÙƒØªØ§Ø¨ Ø¬Ø¯ÙŠØ¯ ğŸš€</h3>
            <input type="text" id="bT" class="search-bar" placeholder="Ø§Ø³Ù… Ø§Ù„ÙƒØªØ§Ø¨" style="margin-bottom:10px;">
            <input type="text" id="bI" class="search-bar" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ØºÙ„Ø§Ù" style="margin-bottom:10px;">
            <button onclick="addBook()" style="width:100%; padding:15px; background:var(--p); color:white; border:none; border-radius:10px;">Ø­ÙØ¸ ÙˆÙ†Ø´Ø±</button>
        </div>
    </section>
</main>

<div id="player" class="player-bar">
    <div style="flex:1">
        <div id="p-title" style="font-size:11px; font-weight:bold;">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
        <audio id="mainAudio" controls style="width:100%; height:30px;"></audio>
    </div>
</div>

<nav class="nav-bar">
    <button class="nav-item active" onclick="nav('home', this)"><i class="fas fa-home"></i>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
    <button class="nav-item" onclick="nav('quotes', this)"><i class="fas fa-quote-right"></i>Ù…Ù‚ØªØ·ÙØ§Øª</button>
    <button id="admin-btn" class="nav-item" onclick="nav('admin-panel', this)"><i class="fas fa-plus-circle"></i>Ø¥Ø¶Ø§ÙØ©</button>
    <button class="nav-item" onclick="nav('profile', this)"><i class="fas fa-user-circle"></i>Ø£Ù†Ø§</button>
</nav>

<script>
    let clicks = 0;
    const audio = document.getElementById('mainAudio');
    const MY_KEY = "AIzaSyC_Q_wn2HmNoEGaTAbflvivPklJD2I_5pU";

    function hizoomSecret() {
        clicks++;
        if(clicks >= 5) {
            localStorage.setItem('hizoom', 'true');
            checkAdmin();
            alert("Ø£Ù‡Ù„Ø§Ù‹ ÙŠØ§ Ù…Ø§Ù„Ùƒ Ø§Ù„Ù…ÙƒØªØ¨Ø©! Ø§Ù„Ø²Ø± Ø¸Ù‡Ø± Ø¹Ù†Ø¯Ùƒ ğŸ¦¾");
            clicks = 0;
        }
    }

    function checkAdmin() {
        if(localStorage.getItem('hizoom') === 'true') document.getElementById('admin-btn').style.display = 'block';
        loadBooks();
    }

    function nav(id, btn) {
        document.querySelectorAll('.page-section').forEach(s => s.classList.remove('active-section'));
        document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
        document.getElementById(id).classList.add('active-section');
        if(btn.classList) btn.classList.add('active');
    }

    function openVoices(title) {
        document.getElementById('target-book').innerText = "ÙƒØªØ§Ø¨: " + title;
        nav('voices-page', document.querySelector('.fa-home'));
    }

    function selectVoice(id, el) {
        document.querySelectorAll('.voice-item').forEach(v => v.classList.remove('selected'));
        el.classList.add('selected');
        document.getElementById('player').style.display = 'flex';
        document.getElementById('p-title').innerText = "ØªØ´ØºÙŠÙ„ Ø¨Ù€ " + el.querySelector('b').innerText;
        // Ù‡Ù†Ø§ ÙŠØ±Ø¨Ø· Ø§Ù„Ù…Ø¨Ø±Ù…Ø¬ Ø§Ù„Ù€ ID Ù…Ø¹ API Ø§Ù„ØµÙˆØª
        audio.src = "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"; 
        audio.play();
    }

    function search() {
        let q = document.getElementById('searchInput').value.toLowerCase();
        document.querySelectorAll('.book-card').forEach(c => {
            c.style.display = c.innerText.toLowerCase().includes(q) ? 'block' : 'none';
        });
    }

    async function generateAI() {
        const txt = document.getElementById('quoteText');
        document.getElementById('quoteCard').style.display = 'block';
        txt.innerText = "ÙƒØ­ÙŠÙ„Ø§Ù† Ø¹Ù… ÙŠÙÙƒØ±Ù„Ùƒ Ø¨Ø­ÙƒÙ…Ø©... â³";
        try {
            const res = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${MY_KEY}`, {
                method: "POST", headers: {"Content-Type": "application/json"},
                body: JSON.stringify({contents: [{parts: [{text: "Ø£Ø¹Ø·Ù†ÙŠ Ø­ÙƒÙ…Ø© Ø´Ø±Ø¹ÙŠØ© Ø£Ùˆ Ø£Ø¯Ø¨ÙŠØ© Ù‚ØµÙŠØ±Ø© Ø¬Ø¯Ø§Ù‹ Ø¨Ù„Ù‡Ø¬Ø© Ø¥Ø¯Ù„Ø¨ÙŠØ© Ø¯Ø§ÙØ¦Ø©."}]}]})
            });
            const d = await res.json();
            txt.innerText = d.candidates[0].content.parts[0].text;
        } catch { txt.innerText = "Ø§Ù„Ù†Øª Ø¶Ø¹ÙŠÙ ÙŠØ§ Ø­ÙŠØ²ÙˆÙ…ØŒ Ø¬Ø±Ø¨ Ù„Ø§Ø­Ù‚Ø§Ù‹!"; }
    }

    function toggleDark() { document.body.classList.toggle('dark-mode'); }
    function toggleSpeed() { audio.playbackRate = document.getElementById('speedT').checked ? 1.5 : 1.0; }

    function addBook() {
        const t = document.getElementById('bT').value;
        const i = document.getElementById('bI').value || 'https://via.placeholder.com/150';
        if(!t) return;
        let books = JSON.parse(localStorage.getItem('my_lib')) || [];
        books.push({t, i});
        localStorage.setItem('my_lib', JSON.stringify(books));
        loadBooks();
        nav('home', document.querySelector('.fa-home'));
    }

    function loadBooks() {
        const grid = document.getElementById('grid');
        let books = JSON.parse(localStorage.getItem('my_lib')) || [];
        grid.innerHTML = `<div class="book-card" onclick="openVoices('Ø²Ø§Ø¯ Ø§Ù„Ù…Ø¹Ø§Ø¯')"><img src="https://via.placeholder.com/150/2C1B18/white?text=Ø²Ø§Ø¯+Ø§Ù„Ù…Ø¹Ø§Ø¯"><h4>Ù…Ø®ØªØµØ± Ø²Ø§Ø¯ Ø§Ù„Ù…Ø¹Ø§Ø¯</h4></div>`;
        books.forEach(b => {
            grid.innerHTML += `<div class="book-card" onclick="openVoices('${b.t}')"><img src="${b.i}"><h4>${b.t}</h4></div>`;
        });
    }
</script>
</body>
</html>
