<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…ÙƒØªØ¨Ø© ØªØ¨ÙŠØ§Ù† | Ù†Ø³Ø®Ø© Ø­ÙŠØ²ÙˆÙ… Ø§Ù„Ø³ÙŠÙ†Ù…Ø§Ø¦ÙŠØ©</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

    <style>
        :root {
            --p: #2C1B18; /* Ø¨Ù†ÙŠ ØºØ§Ù…Ù‚ Ù…Ù„ÙƒÙŠ */
            --g: #D4AF37; /* Ø°Ù‡Ø¨ÙŠ Ù…Ø·ÙÙŠ */
            --bg: #FDFCF9;
            --card: #ffffff;
            --text: #2C1B18;
            --gray: #999;
        }

        .dark-mode {
            --bg: #121212;
            --card: #1e1e1e;
            --text: #e0e0e0;
            --p: #D4AF37;
            --gray: #bbb;
        }

        body {
            background-color: var(--bg);
            color: var(--text);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding-bottom: 130px;
            transition: all 0.3s ease;
            direction: rtl;
            overflow-x: hidden;
        }

        /* Ø§Ù„Ù‡ÙŠØ¯Ø± */
        .main-header {
            background-color: var(--p);
            color: white;
            padding: 40px 20px;
            text-align: center;
            border-radius: 0 0 50px 50px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        }

        /* Ø§Ù„Ø£Ù‚Ø³Ø§Ù… */
        .page-section { display: none; padding: 20px; animation: slideIn 0.4s ease; }
        .active-section { display: block; }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(30px); }
            to { opacity: 1; transform: translateX(0); }
        }

        /* ÙƒØ±ÙˆØª Ø§Ù„ÙƒØªØ¨ */
        .book-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; }
        .book-card {
            background: var(--card);
            border-radius: 20px;
            padding: 12px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            cursor: pointer;
            transition: 0.3s;
        }
        .book-card:active { transform: scale(0.95); }
        .book-card img { width: 100%; border-radius: 15px; height: 140px; object-fit: cover; }

        /* Ø³ØªØ§ÙŠÙ„ Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª (ÙÙŠØ³Ø¨ÙˆÙƒ) */
        .quote-feed { display: flex; flex-direction: column; gap: 20px; margin-top: 20px; }
        .quote-post {
            background: var(--card);
            padding: 20px;
            border-radius: 25px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.06);
            border-right: 5px solid var(--g);
        }
        .post-header { display: flex; align-items: center; gap: 12px; margin-bottom: 15px; }
        .post-header img { width: 45px; height: 45px; border-radius: 50%; border: 2px solid var(--g); }
        .post-content { font-size: 18px; line-height: 1.8; font-weight: 500; }
        .post-footer { 
            margin-top: 15px; padding-top: 10px; border-top: 1px solid #eee;
            display: flex; justify-content: space-between; align-items: center;
            color: var(--gray); font-size: 13px;
        }

        /* Ù…Ø´ØºÙ„ Ø§Ù„ØµÙˆØª Ø§Ù„Ø³ÙŠÙ†Ù…Ø§Ø¦ÙŠ */
        .audio-player {
            position: fixed; bottom: 85px; width: 92%; left: 4%;
            background: var(--p); color: white; padding: 15px;
            border-radius: 30px; display: none; align-items: center; gap: 15px;
            z-index: 2000; box-shadow: 0 15px 35px rgba(0,0,0,0.3);
        }

        /* Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø³ÙÙ„ÙŠ */
        .nav-bar {
            position: fixed; bottom: 0; width: 100%; background: var(--card);
            display: flex; justify-content: space-around; padding: 15px 0;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.05); z-index: 2100;
        }
        .nav-item { background: none; border: none; color: var(--gray); font-size: 12px; cursor: pointer; transition: 0.3s; }
        .nav-item i { display: block; font-size: 24px; margin-bottom: 5px; }
        .nav-item.active { color: var(--p); font-weight: bold; transform: translateY(-5px); }

        .btn-action {
            width: 100%; padding: 18px; background: var(--g); border: none;
            border-radius: 15px; font-weight: bold; color: var(--p); font-size: 16px; cursor: pointer;
        }
    </style>
</head>
<body>

<audio id="snd-click" src="https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3"></audio>
<audio id="snd-pop" src="https://assets.mixkit.co/active_storage/sfx/2017/2017-preview.mp3"></audio>

<header class="main-header">
    <h2 style="margin:0;">Ù…ÙƒØªØ¨Ø© ØªØ¨ÙŠØ§Ù†</h2>
    <p style="margin:5px 0 0; opacity:0.8;">Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø³ÙŠÙ†Ù…Ø§Ø¦ÙŠØ© ÙŠØ§ Ø­ÙŠØ²ÙˆÙ… ğŸ¬âœ¨</p>
</header>

<main>
    <section id="home" class="page-section active-section">
        <div class="book-grid">
            <div class="book-card" onclick="playAudio('Ù…Ø®ØªØµØ± Ø²Ø§Ø¯ Ø§Ù„Ù…Ø¹Ø§Ø¯', 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3', 'z1')">
                <img src="https://via.placeholder.com/150/2C1B18/white?text=Zad">
                <h4>Ø²Ø§Ø¯ Ø§Ù„Ù…Ø¹Ø§Ø¯</h4>
                <small>ØµÙˆØª Ù‡Ø§Ø¯Ø¦ Ø³ÙŠÙ†Ù…Ø§Ø¦ÙŠ</small>
            </div>
            <div class="book-card" onclick="playAudio('Ù‚ØµÙŠØ¯Ø© Ø¨Ù„ÙŠØºØ©', 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3', 'p1')">
                <img src="https://via.placeholder.com/150/D4AF37/white?text=Poem">
                <h4>Ø±ÙˆØ§Ø¦Ø¹ Ø§Ù„Ø£Ø¯Ø¨</h4>
                <small>Ø¥Ù„Ù‚Ø§Ø¡ Ø¨Ù„ÙŠØº</small>
            </div>
        </div>
    </section>

    <section id="snippets" class="page-section">
        <button class="btn-action" onclick="addQuotePost()">
            <i class="fas fa-plus-circle"></i> Ø¥Ø¶Ø§ÙØ© Ù…Ù‚ØªØ·Ù Ø¨Ù„ÙŠØº Ø¬Ø¯ÙŠØ¯
        </button>
        <div id="quoteFeed" class="quote-feed">
            </div>
    </section>

    <section id="profile" class="page-section">
        <div style="text-align:center; padding:20px; background:var(--card); border-radius:25px;">
            <i class="fas fa-user-shield" style="font-size:60px; color:var(--g)"></i>
            <h3>Ø­ÙŠØ²ÙˆÙ… Ø§Ù„Ø­ÙƒÙŠÙ…</h3>
            <p style="color:var(--gray)">Ø·Ø§Ù„Ø¨ Ø¹Ù„Ù… Ø´Ø±Ø¹ÙŠ | Ù…Ø­Ø¨ Ù„Ù„ØªÙ‚Ù†ÙŠØ©</p>
        </div>
        <div style="margin-top:20px;">
            <button class="btn-action" style="background:var(--p); color:white;" onclick="toggleDark()">
                <i class="fas fa-moon"></i> ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ
            </button>
        </div>
    </section>
</main>

<div id="player" class="audio-player">
    <i class="fas fa-compact-disc fa-spin" style="font-size:30px; color:var(--g);"></i>
    <div style="flex:1">
        <div id="track-title" style="font-size:13px; font-weight:bold; margin-bottom:5px;">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ´ØºÙŠÙ„...</div>
        <audio id="mainAudio" controls style="width:100%; height:30px;"></audio>
    </div>
    <button onclick="closePlayer()" style="background:none; border:none; color:white; font-size:25px;">Ã—</button>
</div>

<nav class="nav-bar">
    <button class="nav-item active" onclick="nav('home', this)"><i class="fas fa-th-large"></i>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
    <button class="nav-item" onclick="nav('snippets', this)"><i class="fas fa-stream"></i>Ù…Ù‚ØªØ·ÙØ§Øª</button>
    <button class="nav-item" onclick="nav('profile', this)"><i class="fas fa-user-cog"></i>Ø£Ù†Ø§</button>
</nav>

<script>
    const sndClick = document.getElementById('snd-click');
    const sndPop = document.getElementById('snd-pop');
    let activeId = null;

    const quotesDB = [
        "ÙŠØ§ Ø­ÙŠØ²ÙˆÙ…ØŒ Ù…Ù† Ø£ØµÙ„Ø­ Ù…Ø§ Ø¨ÙŠÙ†Ù‡ ÙˆØ¨ÙŠÙ† Ø§Ù„Ù„Ù‡ØŒ Ø£ØµÙ„Ø­ Ø§Ù„Ù„Ù‡ Ù…Ø§ Ø¨ÙŠÙ†Ù‡ ÙˆØ¨ÙŠÙ† Ø§Ù„Ù†Ø§Ø³. âœ¨",
        "Ø§Ù„Ø¹Ù„Ù… Ø¨Ø§Ù„ØªØ¹Ù„Ù…ØŒ ÙˆØ§Ù„Ø­Ù„Ù… Ø¨Ø§Ù„ØªØ­Ù„Ù…ØŒ ÙˆÙ…Ù† ÙŠØªØµØ¨Ø± ÙŠØµØ¨Ø±Ù‡ Ø§Ù„Ù„Ù‡. ğŸ“š",
        "Ø§Ø¨Ù†Ù Ø¹Ø²Ù…Ùƒ Ù…ØªÙ„ Ø¬Ø¨Ø§Ù„ Ø¥Ø¯Ù„Ø¨ØŒ Ø®Ù„ÙŠÙƒ ØµÙ„Ø¨ Ø¨Ø§Ù„Ø­Ù‚ ÙˆÙ„ÙŠÙ† Ù…Ø¹ Ø§Ù„Ø®Ù„Ù‚. ğŸ”ï¸",
        "Ø§Ù„ÙˆÙ‚Øª Ù‡Ùˆ Ø±Ø£Ø³ Ù…Ø§Ù„ÙƒØŒ Ù„Ø§ ØªØ¶ÙŠØ¹Ù‡ Ø¥Ù„Ø§ Ø¨Ø´ÙŠØ¡ Ø¨ÙŠÙ‚Ø±Ø¨Ùƒ Ù…Ù† Ø§Ù„Ø¬Ù†Ø©. ğŸ”¥",
        "Ø§Ù„Ø¨Ù„Ø§ØºØ© Ù…Ùˆ Ø¨Ø³ Ø¨Ø§Ù„Ø­ÙƒÙŠØŒ Ø§Ù„Ø¨Ù„Ø§ØºØ© Ø¥Ù†Ùƒ ØªØ¹Ø±Ù Ø¥ÙŠÙ…Øª ØªØ³ÙƒØª ÙˆØ¥ÙŠÙ…Øª ØªØ­ÙƒÙŠ. ğŸ¤«"
    ];

    function nav(id, btn) {
        sndClick.play();
        document.querySelectorAll('.page-section').forEach(s => s.classList.remove('active-section'));
        document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
        document.getElementById(id).classList.add('active-section');
        btn.classList.add('active');
    }

    function playAudio(title, url, id) {
        sndPop.play();
        activeId = id;
        const player = document.getElementById('player');
        const audio = document.getElementById('mainAudio');
        const savedTime = localStorage.getItem('time_' + id);
        
        document.getElementById('track-title').innerText = title;
        audio.src = url;
        player.style.display = 'flex';
        
        if(savedTime) {
            audio.currentTime = Math.max(0, parseFloat(savedTime) - 10); // Ø§Ù„Ø±Ø¬ÙˆØ¹ 10 Ø«ÙˆØ§Ù†ÙŠ Ø³ÙŠÙ†Ù…Ø§Ø¦ÙŠ
        }
        audio.play();
    }

    function closePlayer() {
        document.getElementById('player').style.display = 'none';
        document.getElementById('mainAudio').pause();
    }

    document.getElementById('mainAudio').ontimeupdate = function() {
        if(activeId) localStorage.setItem('time_' + activeId, this.currentTime);
    };

    function addQuotePost() {
        sndPop.play();
        const feed = document.getElementById('quoteFeed');
        const randomQuote = quotesDB[Math.floor(Math.random() * quotesDB.length)];
        const now = new Date().toLocaleTimeString('ar-SY', {hour:'2-digit', minute:'2-digit'});

        const post = document.createElement('div');
        post.className = 'quote-post';
        post.innerHTML = `
            <div class="post-header">
                <img src="https://via.placeholder.com/50?text=T">
                <div>
                    <strong>Ù…ÙƒØªØ¨Ø© ØªØ¨ÙŠØ§Ù†</strong><br>
                    <small>Ù…Ù†Ø´ÙˆØ± Ø­ÙƒÙŠÙ…</small>
                </div>
            </div>
            <div class="post-content">${randomQuote}</div>
            <div class="post-footer">
                <span><i class="far fa-clock"></i> ${now}</span>
                <button onclick="savePost(this)" style="background:none; border:none; color:var(--p); font-weight:bold; cursor:pointer;">
                    <i class="fas fa-download"></i> Ø­ÙØ¸ ÙƒØµÙˆØ±Ø©
                </button>
            </div>
        `;
        feed.prepend(post);
    }

    function savePost(btn) {
        const post = btn.closest('.quote-post');
        html2canvas(post, {scale: 3}).then(canvas => {
            const link = document.createElement('a');
            link.download = 'Tebyan_Hizom_' + Date.now() + '.png';
            link.href = canvas.toDataURL();
            link.click();
        });
    }

    function toggleDark() {
        sndClick.play();
        document.body.classList.toggle('dark-mode');
    }

    // Ø¥Ø¶Ø§ÙØ© Ø£ÙˆÙ„ Ù…Ù‚ØªØ·Ù Ø¹Ù†Ø¯ Ø§Ù„ØªØ´ØºÙŠÙ„
    window.onload = () => { addQuotePost(); };
</script>

</body>
</html>
