<main>
    <section id="home" class="page-section active-section">
        <div class="search-container" style="margin-bottom: 20px;">
            <input type="text" id="searchInput" class="search-bar" placeholder="ابحث عن كتاب أو قصيدة..." onkeyup="searchBooks()">
        </div>
        
        <div id="grid" class="book-grid">
            <div class="book-card" onclick="playAudio('مختصر زاد المعاد', 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3', 'https://via.placeholder.com/150/2C1B18/white?text=زاد+المعاد')">
                <img src="https://via.placeholder.com/150/2C1B18/white?text=زاد+المعاد">
                <h4>مختصر زاد المعاد</h4>
                <div class="book-meta">
                    <span><i class="fas fa-headphones"></i> صوتي</span>
                    <button class="fav-btn" onclick="addToMyList(event, 'مختصر زاد المعاد')"><i class="far fa-star"></i></button>
                </div>
            </div>

            <div class="book-card" onclick="playAudio('روائع المختارة', 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3', 'https://via.placeholder.com/150/D4AF37/white?text=قصائد')">
                <img src="https://via.placeholder.com/150/D4AF37/white?text=قصائد">
                <h4>روائع المختارة</h4>
                <div class="book-meta">
                    <span><i class="fas fa-microphone"></i> رادود</span>
                    <button class="fav-btn" onclick="addToMyList(event, 'روائع المختارة')"><i class="far fa-star"></i></button>
                </div>
            </div>
        </div>
    </section>

    </main>

<div id="player" class="audio-player">
    <img id="player-img" src="" style="width: 40px; height: 40px; border-radius: 10px; display: none;">
    <div style="flex:1">
        <div id="track-title" style="font-size:12px; font-weight:bold;">جاري التشغيل...</div>
        <audio id="mainAudio" controls style="width:100%; height:30px;"></audio>
    </div>
    <button onclick="closePlayer()" style="background:none; border:none; color:white; font-size:20px;">×</button>
</div>

<script>
    const MY_KEY = "AIzaSyC_Q_wn2HmNoEGaTAbflvivPklJD2I_5pU"; // مفتاحك محفوظ هون

    // وظيفة التنقل
    function nav(id, btn) {
        document.querySelectorAll('.page-section').forEach(s => s.classList.remove('active-section'));
        document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
        document.getElementById(id).classList.add('active-section');
        btn.classList.add('active');
    }

    // وظيفة البحث الذكي
    function searchBooks() {
        let input = document.getElementById('searchInput').value.toLowerCase();
        let cards = document.getElementsByClassName('book-card');
        for (let card of cards) {
            let title = card.getElementsByTagName('h4')[0].innerText.toLowerCase();
            card.style.display = title.includes(input) ? "block" : "none";
        }
    }

    // وظيفة تشغيل الصوت
    function playAudio(title, url, img) {
        const player = document.getElementById('player');
        const audio = document.getElementById('mainAudio');
        const pImg = document.getElementById('player-img');
        
        document.getElementById('track-title').innerText = title;
        audio.src = url;
        pImg.src = img;
        pImg.style.display = 'block';
        player.style.display = 'flex';
        audio.play();
    }

    function closePlayer() {
        document.getElementById('mainAudio').pause();
        document.getElementById('player').style.display = 'none';
    }

    function addToMyList(event, title) {
        event.stopPropagation(); // مشان ما يشتغل المشغل لما نضغط عالنجمة
        alert("تمت إضافة '" + title + "' إلى قائمتك يا حيزوم! ⭐");
    }
</script>
